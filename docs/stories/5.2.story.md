# Story 5.2: Service Deployment Validation

## Status
**Draft**

## Story
**As a** Backend Developer,
**I want** all application services deployed correctly,
**so that** the system can process video streams.

## Acceptance Criteria
1. `camera-service` deployment ready
2. `inference-service` deployment ready (with YOLO model loaded)
3. `api-gateway` deployment ready (endpoints accessible)
4. `training-controller` deployment ready
5. `web-dashboard` deployment ready (frontend accessible)
6. MediaMTX sidecar/deployment ready

## Tasks / Subtasks

- [ ] **Task 1: Build and Push Docker Images** (AC: 1, 2, 3, 4, 5)
  - [ ] Build `web-dashboard` Docker image
  - [ ] Build backend service images (`camera-service`, `inference-service`, `api-gateway`, `training-controller`)
  - [ ] Push images to registry or load into cluster nodes

- [ ] **Task 2: Apply App Manifests via ArgoCD** (AC: 1-6)
  - [ ] Ensure all app manifests in `k8s/apps/` are included in the ArgoCD tracking
  - [ ] Trigger ArgoCD sync
  - [ ] Verify applications are Healthy and Synced in ArgoCD

- [ ] **Task 3: Verify Pod Health & logs** (AC: 1-6)
  - [ ] Check `kubectl get pods -n sentinel` (or respective namespaces)
  - [ ] Verify no CrashLoopBackOff states
  - [ ] Check logs for initial startup errors (DB connection, Redpanda connection)

- [ ] **Task 4: Connectivity & Functionality Test** (AC: 3, 5)
  - [ ] Verify Ingress accessibility for Web Dashboard
  - [ ] Verify API Gateway health endpoint
  - [ ] Confirm MediaMTX stream availability (if testable without cameras yet)

## Dev Notes
### Prerequisites
- Story 5.1 (Infrastructure) MUST be Done.
- Database and Redpanda must be healthy.

### Repositories / Paths
- Services: `services/`
- Manifests: `k8s/apps/`

### Validation
- Use `kubectl logs` extensively.
- Use `kubectl port-forward` to test services if Ingress is not fully DNS-resolved locally.
