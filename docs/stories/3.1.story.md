# Story 3.1: Frontend Application Setup

## Status
Done

## Story
**As a** Frontend Developer,
**I want** to initialize the Next.js application with the correct styling and directory structure,
**So that** I have a solid foundation for the UI components.

## Acceptance Criteria
1. [x] Next.js 14+ (App Router) initialized in `services/web-dashboard`.
2. [x] TailwindCSS configured with the "Cyberpunk" color palette (from `front-end-spec.md`).
3. [x] Project directory structure mirrors the standard feature-based architecture.
4. [x] Standard layout (Sidebar, Main Content Area) implemented.

## Tasks / Subtasks

- [x] **Task 1: Initialize Next.js Project** (AC: 1, 3)
  - [x] Create `services/web-dashboard/` directory.
  - [x] Run `npx create-next-app@latest ./ --typescript --tailwind --eslint --app --src-dir --import-alias "@/*"` in the directory.
  - [x] Verify Next.js 14+ with App Router is scaffolded correctly.
  - [x] Add `.gitignore` for Next.js (auto-generated by create-next-app).

- [x] **Task 2: Configure TailwindCSS with Cyberpunk Palette** (AC: 2)
  - [x] Update `globals.css` with custom colors (TailwindCSS v4 uses @theme inline):
    - `background`: `#050510`
    - `surface`: `#1A1A2E`
    - `primary` / `neon`: `#00F0FF`
    - `success`: `#00FF94`
    - `alert` / `danger`: `#FF2A6D`
    - `warning`: `#FFC857`
    - `text-primary`: `#EAEAEA`
    - `text-muted`: `#8892B0`
  - [x] Configure `globals.css` with base dark theme styles.
  - [x] Add `Inter` font from Google Fonts (via `next/font`).

- [x] **Task 3: Setup Directory Structure** (AC: 3)
  - [x] Create feature-based directory structure:
    - `src/app/` - App Router pages
    - `src/components/` - Reusable UI components
    - `src/components/ui/` - Base UI primitives
    - `src/components/layout/` - Layout components (Sidebar, Header)
    - `src/lib/` - Utility functions, hooks
    - `src/types/` - TypeScript type definitions
  - [x] Create placeholder `README.md` in each directory explaining its purpose.

- [x] **Task 4: Implement Standard Layout** (AC: 4)
  - [x] Create `src/components/layout/Sidebar.tsx`:
    - Persistent left rail (5% width per spec).
    - Navigation icons: Mission Control, City Map, Triage, Pipeline, Settings.
    - Notification badge placeholder.
  - [x] Create `src/components/layout/MainLayout.tsx`:
    - Combines Sidebar + Main Content Area.
    - Uses CSS Grid or Flexbox for layout.
  - [x] Update `src/app/layout.tsx` to use `MainLayout`.
  - [x] Create `src/app/page.tsx` as placeholder Mission Control page.

- [x] **Task 5: Verify Build and Lint** (AC: 1, 2, 3, 4)
  - [x] Run `npm run build` to verify no TypeScript errors.
  - [x] Run `npm run lint` to verify ESLint passes.
  - [x] Visual verification of dark theme and layout in browser.

## Dev Notes

### Previous Story Insights
Story 2.4 (Pipeline Integration) completed the gRPC + Kafka pipeline. The frontend will eventually consume `DetectionEvent` messages via WebSocket from `api-gateway`. Key schema reference:
```json
{
  "camera_id": "cam_01",
  "detections": [{ "class": "car", "confidence": 0.95, "bbox": [x,y,w,h] }],
  "anomaly_type": "congestion"
}
```
[Source: architecture.md#data-models]

### Frontend Architecture
- **Framework**: Next.js 14 with App Router [Source: tech-stack.md]
- **Language**: TypeScript 5.3+ with strict mode enabled [Source: coding-standards.md]
- **Location**: `services/web-dashboard/` with `app/` for pages and `components/` for UI [Source: source-tree.md]

### Visual Design Specifications
**Color Palette** (Cyberpunk Modern):
| Color | Hex | Usage |
|-------|-----|-------|
| Background | `#050510` | Main background |
| Surface | `#1A1A2E` | Card backgrounds, panels |
| Primary (Neon) | `#00F0FF` | Active elements, selection borders |
| Success | `#00FF94` | Healthy states, "True Positive" |
| Alert (Danger) | `#FF2A6D` | Critical anomalies, errors |
| Warning | `#FFC857` | High latency, potential issues |
| Text Primary | `#EAEAEA` | Main content |
| Text Muted | `#8892B0` | Metadata, timestamps |

[Source: front-end-spec.md#6.2]

**Typography**:
- Font Family: `Inter` (Google Fonts)
- Weights: Bold (700), Medium (500), Regular (400)
[Source: front-end-spec.md#6.3]

### Layout Specifications
**Mission Control Layout**:
- Left Rail (5%): Navigation Icons + Notifications
- Center Grid (75%): Video Grid (responsive 2x2 to 6x6)
- Right Panel (20%): Live Event Log
[Source: front-end-spec.md#4.1]

**Navigation Items**:
- Mission Control, City Map, Triage, Pipeline, Settings
[Source: front-end-spec.md#2.2]

### Technical Constraints
- ESLint for linting, Prettier for formatting [Source: coding-standards.md]
- TypeScript strict mode required [Source: coding-standards.md]
- Functional components with hooks [Source: coding-standards.md]
- State management: React Context or Zustand [Source: coding-standards.md]

### File Locations
```text
services/web-dashboard/
├── src/
│   ├── app/           # App Router pages
│   ├── components/    # Reusable UI components
│   └── lib/           # Utilities, hooks
├── tailwind.config.ts
├── package.json
└── Dockerfile
```
[Source: source-tree.md]

### Testing
- **Test Location**: `services/web-dashboard/tests/` or component-level `__tests__/`
- **No specific testing strategy document found** - follow standard Next.js testing patterns with Jest/React Testing Library.

## Verification Plan

### Automated
- `npm run build` completes without errors.
- `npm run lint` shows no ESLint violations.

### Manual
- Open `http://localhost:3000` in browser.
- Verify dark theme (`#050510` background) is applied.
- Verify Sidebar is visible on left with navigation icons.
- Verify Inter font is loaded.
- Verify responsive layout works on resize.

## Dev Agent Record

### Agent Model Used
Gemini 2.5 Pro (James - Dev Agent)

### File List
| File | Action | Description |
|------|--------|-------------|
| `services/web-dashboard/` | Created | Next.js 16.1.3 project |
| `src/app/globals.css` | Modified | Cyberpunk palette with TailwindCSS v4 |
| `src/app/layout.tsx` | Modified | Inter font, MainLayout wrapper |
| `src/app/page.tsx` | Modified | Mission Control placeholder |
| `src/components/layout/Sidebar.tsx` | Created | 5% sidebar with nav icons |
| `src/components/layout/MainLayout.tsx` | Created | Layout wrapper |
| `src/components/layout/index.ts` | Created | Barrel exports |
| `src/components/ui/README.md` | Created | Directory placeholder |
| `src/components/layout/README.md` | Created | Directory placeholder |
| `src/lib/README.md` | Created | Directory placeholder |
| `src/types/README.md` | Created | Directory placeholder |

### Completion Notes
- Used TailwindCSS v4 (auto-installed by create-next-app) with `@theme inline` directive instead of `tailwind.config.ts`
- Next.js version: 16.1.3 with Turbopack
- All verification passed: `npm run lint` (0 violations), `npm run build` (success), visual verification (dark theme, sidebar, fonts)

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-16 | 1.0 | Initial draft | SM Agent (Bob) |
| 2026-01-16 | 1.1 | Implementation complete | Dev Agent (James) |

## QA Results

### Review Date: 2026-01-16

### Reviewed By: Quinn (Test Architect)

### Code Quality Assessment

**Overall: Excellent** - The frontend application setup demonstrates high-quality implementation that fully aligns with the architectural specifications, coding standards, and the Cyberpunk UI/UX design spec.

**Strengths:**
- Clean component architecture with proper separation of concerns (`layout`, `ui` directories)
- TailwindCSS v4 color palette correctly implements the Cyberpunk Modern theme with all specified colors
- TypeScript strict mode enabled with proper type annotations throughout
- Functional components with hooks pattern followed consistently
- Well-structured barrel exports for clean imports
- Responsive design considerations in grid layouts

**Code Highlights:**
- `globals.css`: Properly implements CSS custom properties with `@theme inline` directive for TailwindCSS v4
- `Sidebar.tsx`: Client component with active state highlighting, hover tooltips, and notification badge placeholder
- `page.tsx`: Clean local component definitions (`StatCard`, `EventCard`) with proper TypeScript interfaces

### Refactoring Performed

None required - the implementation is clean and follows best practices.

### Compliance Check

- Coding Standards: ✓ TypeScript strict mode, ESLint configured, functional components with hooks
- Project Structure: ✓ Feature-based directory structure in `src/` with proper organization
- Testing Strategy: ✗ No tests added (noted in story that testing pattern TBD for this story)
- All ACs Met: ✓ All 4 acceptance criteria fully satisfied

### Improvements Checklist

- [x] Color palette matches `front-end-spec.md` section 6.2 exactly
- [x] Inter font configured with correct weights (400, 500, 700)
- [x] Sidebar implements 5% width per spec section 4.1
- [x] Navigation icons for all 5 required items (Mission Control, City Map, Triage, Pipeline, Settings)
- [x] Notification badge placeholder present
- [ ] Consider extracting `StatCard` and `EventCard` to `src/components/ui/` for reuse in future stories
- [ ] Add unit tests for components when testing strategy is established
- [ ] Consider adding ESLint rules for import ordering and component naming

### Security Review

No security concerns - this is a UI scaffolding story with no data handling or authentication logic.

### Performance Considerations

- Font loading uses Next.js `next/font/google` for optimal performance
- TailwindCSS v4 with PostCSS produces optimized CSS bundle
- Lazy loading not yet implemented for video streams (future stories)

### Files Modified During Review

None - no refactoring was necessary.

### Gate Status

Gate: **PASS** → docs/qa/gates/3.1-frontend-application-setup.yml

### Recommended Status

✓ Ready for Done - All acceptance criteria met, build passes, lint clean, visual verification confirms dark theme and layout.
