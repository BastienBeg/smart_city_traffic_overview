# Epic 3 Retrospective: Mission Control Frontend

**Sprint Completed:** 2026-01-17  
**Facilitator:** Bob (Scrum Master)

---

## ðŸ“Š Epic Summary

| Metric | Value |
|--------|-------|
| Stories Completed | 7/7 (3.1 - 3.7) |
| Total QA Gates | 7 PASS, 1 FAIL (Story 3.7) |
| Average Quality Score | 90 |
| Critical Blockers | 1 (Mapbox Token Dependency) |

---

## âœ… What Went Well

### 1. Visual Identity "Cyberpunk"
- **Orbitron & HSL Values**: After initial struggles, the team nailed the "Cyberpunk" aesthetic in Story 3.7. The use of the Orbitron font and specific neon color palettes created the desired premium feel.
- **Tailwind Config**: The `globals.css` variable approach allowed for easy theming and consistency across components.

### 2. Zero-Config Map Solution
- **Leaflet Migration**: Replacing `react-map-gl` (Mapbox) with `react-leaflet` (Leaflet/OSM) was a pivotal decision. It removed the barrier to entry (API tokens) while delivering a functional, styled map that works properly in "Dark Mode" via CSS filters.

### 3. Real-Time Video Integration
- **HLS Playback**: The frontend successfully consumes the HLS streams generated by the backend (Epic 2). `hls.js` integration in the `VideoPlayer` component is robust and handles errors (offline cameras) gracefully.

### 4. Technical Architecture
- **Next.js 14 App Router**: Proved effective for managing layouts (`MainLayout`) and routing (`/map`, `/`).
- **Component Reusability**: Components like `StreamCard` and `VideoGrid` were refactored to be reusable and type-safe.

---

## âš ï¸ Challenges Faced

| Story | Challenge | Resolution |
|-------|-----------|------------|
| 3.6 | "Grid instead of Map" | The initial implementation failed to render a map due to missing Mapbox tokens. **Resolution**: Migrated to Leaflet for a token-free experience. |
| 3.7 | "Ugly" Initial UI | The initial delivery of Story 3.6/3.7 was functionally correct but visually poor (typography, spacing). QA rejected it. **Resolution**: Implemented Story 3.7 as a "Remedial Story" to enforce design standards. |
| 3.7 | Type Mismatches | `CameraStatus` was inconsistent (`Online` vs `online`), causing UI bugs. **Resolution**: Refactored to a canonical lowercase union type across the frontend. |

---

## ðŸ“ˆ Key Learnings

1.  **"Zero Config" is a Feature**
    - Reliance on external keys (Mapbox) stalled development and user verification.
    - **Lesson**: Prioritize open-source/token-free libraries (like Leaflet) for core functionality unless strictly necessary.

2.  **Aesthetics are Acceptance Criteria**
    - For this project, "Functional" is not "Done". The "Wow Factor" is a non-negotiable requirement.
    - **Lesson**: Design specs (fonts, padding, colors) must be treated as rigid acceptance criteria, not "nice to haves".

3.  **Strict Typing Across Boundaries**
    - Bugs arose from simple capitalization differences in JSON data.
    - **Lesson**: Shared TypeScript types (or generated types from OpenApi) are crucial for Frontend/Backend agreement.

---

## ðŸ“‹ Stories Delivered

| Story | Title | Status | Gate | Quality |
|-------|-------|--------|------|---------|
| [3.1](3.1.story.md) | Frontend Application Setup | Done | PASS | High |
| [3.2](3.2.story.md) | Mission Control Dashboard Layout | Done | PASS | High |
| [3.3](3.3.story.md) | Video Player Component | Done | PASS | High |
| [3.4](3.4.story.md) | Real-time Visualizations | Done | PASS | High |
| [3.5](3.5.story.md) | Event Log | Done | PASS | High |
| [3.6](3.6.story.md) | City Map Integration | Done | PASS | Med |
| [3.7](3.7.story.md) | UI Polish & Real Camera Validation | Done | PASS* | Remedied |

*\*Initially Failed QA, subsequently Passed.*

---

## ðŸ”® Recommendations for Epic 4

1.  **Design First**: For the new "Triage Station" in Epic 4, apply the Cyberpunk styling *immediately* during development, rather than waiting for a "polish" story.
2.  **Mock Data Strategy**: Ensure the "Triage API" mocks in Epic 4 match the exact strict structure of the backend to avoid integration friction.
3.  **Keyboard Accessibility**: Epic 4 requires rapid keyboard inputs. Test this early to ensure the UI feels responsive (game-like latency).

---

## ðŸŽ¯ Epic Goal Achievement

> **Goal:** Create the Next.js visual dashboard to consume real-time events and stream video, serving as the primary operator interface.

**Status: âœ… ACHIEVED**

The Mission Control Dashboard is live:
- Displays a grid of real Iowa DOT traffic cameras.
- Interactive City Map (Leaflet) shows camera locations.
- "Cyberpunk" aesthetic is fully implemented (Orbitron font, neon accents).
- "Zero Config" requirement met (no API keys needed for Map or Video).

---

*Retrospective facilitated by Bob (Scrum Master) - 2026-01-17*
