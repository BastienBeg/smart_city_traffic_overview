[{"filePath":"C:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\app\\map\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\app\\page.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\app\\page.tsx:42:7\n  40 |   useEffect(() => {\n  41 |     if (lastEvent && lastEvent.eventType !== \"system\") {\n> 42 |       setEvents((prev) => {\n     |       ^^^^^^^^^ Avoid calling setState() directly within an effect\n  43 |         // Keep last 50 events\n  44 |         const newEvents = [...prev, lastEvent as DetectionEvent];\n  45 |         if (newEvents.length > 50) {","line":42,"column":7,"nodeType":null,"endLine":42,"endColumn":16}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport VideoGrid from \"@/components/ui/VideoGrid\";\nimport { Camera } from \"@/types/camera\";\nimport EventLog from \"@/components/ui/EventLog\";\nimport { HealthDashboard } from \"@/components/ui/HealthDashboard\";\nimport { DetectionEvent } from \"@/types/events\";\n\nimport { useWebSocket } from \"@/contexts/WebSocketContext\";\n\n// Mock camera data - includes real Iowa DOT cameras for validation\nconst mockCameras: Camera[] = [\n  // Real cameras (matching Iowa DOT from Map page with actual HLS streams)\n  { \n    id: \"iowa-us20-jfk\", \n    name: \"US 20 at JFK Rd (Iowa DOT)\", \n    location: { lat: 42.4920, lng: -92.3448 },\n    status: \"online\",\n    streamUrl: \"https://iowadotsfs1.us-east-1.skyvdn.com:443/rtplive/dqtv17lb/playlist.m3u8\"\n  },\n  { \n    id: \"iowa-i80-280\", \n    name: \"I-80/I-280 Interchange (Iowa DOT)\", \n    location: { lat: 41.5232, lng: -90.5150 },\n    status: \"online\",\n    streamUrl: \"https://iowadotsfs1.us-east-1.skyvdn.com:443/rtplive/dqtv01lb/playlist.m3u8\"\n  },\n  // Mock cameras (fallback to localhost mock server)\n  { id: \"cam_03\", name: \"Downtown Plaza\", location: { lat: 37.7649, lng: -122.4294 }, status: \"alert\" },\n  { id: \"cam_04\", name: \"Industrial Zone\", location: { lat: 37.7549, lng: -122.4394 }, status: \"online\" },\n];\n\nexport default function MissionControlPage() {\n  const [cameras] = useState<Camera[]>(mockCameras);\n  const [events, setEvents] = useState<DetectionEvent[]>([]);\n  const { lastEvent } = useWebSocket(); // Subscribe to all events\n\n  // Update events log when new event arrives via WebSocket\n  useEffect(() => {\n    if (lastEvent && lastEvent.eventType !== \"system\") {\n      setEvents((prev) => {\n        // Keep last 50 events\n        const newEvents = [...prev, lastEvent as DetectionEvent];\n        if (newEvents.length > 50) {\n            return newEvents.slice(newEvents.length - 50);\n        }\n        return newEvents;\n      });\n    }\n  }, [lastEvent]);\n\n  // Calculate stats\n  const activeCameras = cameras.filter((c) => c.status === \"online\").length;\n  const alertCameras = cameras.filter((c) => c.status === \"alert\").length;\n  const anomalyCount = events.filter((e) => e.eventType === \"anomaly\").length;\n  const detectionCount = events.filter((e) => e.eventType === \"detection\").length;\n\n  return (\n    <div className=\"h-screen flex\">\n      {/* Main Content Area - Flexible width accounting for Event Log panel */}\n      <div className=\"flex-1 flex flex-col p-6 overflow-hidden\">\n        {/* Header with Stats */}\n        <header className=\"mb-6 shrink-0\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <div>\n              <h1 className=\"text-3xl font-bold font-orbitron text-primary tracking-wide glow-primary-text\">\n                Mission Control\n              </h1>\n              <p className=\"text-text-muted text-sm mt-1 font-mono\">\n                Real-time traffic monitoring and anomaly detection\n              </p>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <span className=\"px-3 py-1 bg-success/20 text-success rounded-full text-xs font-bold font-mono tracking-wider uppercase border border-success/30\">\n                System Online\n              </span>\n            </div>\n          </div>\n\n          {/* Stats Bar */}\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            <StatCard\n              label=\"Active Cameras\"\n              value={activeCameras.toString()}\n              status=\"success\"\n            />\n            <StatCard\n              label=\"Cameras in Alert\"\n              value={alertCameras.toString()}\n              status={alertCameras > 0 ? \"alert\" : \"success\"}\n            />\n            <StatCard\n              label=\"Detections\"\n              value={detectionCount.toString()}\n              status=\"primary\"\n            />\n            <StatCard\n              label=\"Anomalies\"\n              value={anomalyCount.toString()}\n              status={anomalyCount > 0 ? \"warning\" : \"success\"}\n            />\n          </div>\n        </header>\n\n        {/* Video Grid */}\n        <div className=\"flex-1 overflow-auto bg-surface/50 rounded-lg border border-text-muted/20 backdrop-blur-sm p-1\">\n          <VideoGrid cameras={cameras} />\n        </div>\n      </div>\n\n      {/* Event Log Panel - Fixed width */}\n      <div className=\"w-96 border-l border-text-muted/20 p-6 flex flex-col gap-6 bg-surface/30 backdrop-blur-md\">\n        <HealthDashboard />\n        <EventLog events={events} maxHeight=\"calc(100vh - 400px)\" />\n      </div>\n    </div>\n  );\n}\n\ninterface StatCardProps {\n  label: string;\n  value: string;\n  status: \"success\" | \"primary\" | \"alert\" | \"warning\";\n}\n\nfunction StatCard({ label, value, status }: StatCardProps) {\n  const statusColors = {\n    success: \"text-success border-success/30 bg-success/5\",\n    primary: \"text-primary border-primary/30 bg-primary/5\",\n    alert: \"text-alert border-alert/30 bg-alert/5\",\n    warning: \"text-warning border-warning/30 bg-warning/5\",\n  };\n\n  return (\n    <div className={`rounded-lg p-4 border transition-all hover:bg-opacity-20 ${statusColors[status]}`}>\n      <p className=\"text-text-muted text-[10px] uppercase tracking-widest font-bold\">\n        {label}\n      </p>\n      <p\n        className={`text-3xl font-bold mt-1 font-orbitron ${statusColors[status].split(\" \")[0]}`}\n      >\n        {value}\n      </p>\n    </div>\n  );\n}\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\app\\triage\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\components\\layout\\MainLayout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\components\\layout\\Sidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\components\\layout\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\components\\providers\\QueryProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\components\\triage\\TriageInterface.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'TriageTask' is defined but never used.","line":6,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":25,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"TriageTask"},"fix":{"range":[201,213],"text":""},"desc":"Remove unused variable \"TriageTask\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\r\nimport { useEffect, useState, useCallback } from \"react\";\r\nimport Image from \"next/image\";\r\nimport { api, TriageTask } from \"@/lib/api\";\r\n\r\nexport default function TriageInterface() {\r\n  const queryClient = useQueryClient();\r\n  const [feedback, setFeedback] = useState<\"correct\" | \"incorrect\" | null>(null);\r\n  const [validatedCount, setValidatedCount] = useState(0);\r\n\r\n  // Fetch next image\r\n  const { data: task, isLoading, isError, refetch } = useQuery({\r\n    queryKey: [\"triage\", \"next\"],\r\n    queryFn: api.fetchNextImage,\r\n    staleTime: 0, // Always fetch fresh task\r\n    gcTime: 0, // Don't cache for long\r\n    refetchOnWindowFocus: false,\r\n  });\r\n\r\n  // Prefetch next task to ensure low latency (simple approach: just invalidate/refetch on completion)\r\n  // Ideally we'd have a queue, but for now we'll just refetch immediately.\r\n\r\n  const mutation = useMutation({\r\n    mutationFn: async ({ id, verified, currentLabel }: { id: string; verified: boolean; currentLabel: string }) => {\r\n      await api.submitValidation(id, verified, currentLabel);\r\n    },\r\n    onSuccess: () => {\r\n      setValidatedCount((prev) => prev + 1);\r\n      // Invalidate query to fetch next image\r\n      queryClient.invalidateQueries({ queryKey: [\"triage\", \"next\"] });\r\n      setFeedback(null);\r\n    },\r\n  });\r\n\r\n  const handleValidation = useCallback((verified: boolean) => {\r\n    if (!task || mutation.isPending) return;\r\n    \r\n    setFeedback(verified ? \"correct\" : \"incorrect\");\r\n    \r\n    // Short delay for visual feedback before fetching next\r\n    setTimeout(() => {\r\n        mutation.mutate({ id: task.id, verified, currentLabel: task.currentLabel });\r\n    }, 200);\r\n  }, [task, mutation]);\r\n\r\n  const handleSkip = useCallback(() => {\r\n      if (mutation.isPending) return;\r\n      queryClient.invalidateQueries({ queryKey: [\"triage\", \"next\"] });\r\n  }, [mutation, queryClient]);\r\n\r\n  // Keyboard Shortcuts\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      switch (e.key) {\r\n        case \"ArrowRight\":\r\n        case \"y\":\r\n        case \"Y\":\r\n          handleValidation(true);\r\n          break;\r\n        case \"ArrowLeft\":\r\n        case \"n\":\r\n        case \"N\":\r\n          handleValidation(false);\r\n          break;\r\n        case \"ArrowDown\":\r\n        case \" \": // Space\r\n          handleSkip();\r\n          break;\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"keydown\", handleKeyDown);\r\n    return () => window.removeEventListener(\"keydown\", handleKeyDown);\r\n  }, [handleValidation, handleSkip]);\r\n\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-full text-primary animate-pulse\">\r\n        Fetching task...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (isError || !task) {\r\n    return (\r\n      <div className=\"flex flex-col items-center justify-center h-full text-text-muted gap-4\">\r\n        <p>Failed to load task or queue empty.</p>\r\n        <button \r\n            onClick={() => refetch()}\r\n            className=\"px-4 py-2 bg-primary text-background rounded hover:bg-primary/90\"\r\n        >\r\n            Retry\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Calculate overlay position\r\n  // task.bbox is [x, y, w, h] normalized\r\n  const [bx, by, bw, bh] = task.bbox;\r\n  const overlayStyle = {\r\n    left: `${bx * 100}%`,\r\n    top: `${by * 100}%`,\r\n    width: `${bw * 100}%`,\r\n    height: `${bh * 100}%`,\r\n  };\r\n\r\n  const getBorderColor = () => {\r\n      if (feedback === \"correct\") return \"border-green-500 shadow-[0_0_50px_rgba(34,197,94,0.5)]\";\r\n      if (feedback === \"incorrect\") return \"border-red-500 shadow-[0_0_50px_rgba(239,68,68,0.5)]\";\r\n      return \"border-primary/30\";\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-full max-h-[calc(100vh-6rem)] gap-6 p-4\">\r\n        {/* Header / Stats */}\r\n        <div className=\"flex justify-between items-center bg-background-paper p-4 rounded-lg border border-primary/20\">\r\n            <h2 className=\"text-xl font-orbitron text-primary\">TRIAGE STATION</h2>\r\n            <div className=\"flex gap-6 text-sm\">\r\n                <div className=\"flex flex-col items-end\">\r\n                    <span className=\"text-text-muted\">SESSION VALIDATED</span>\r\n                    <span className=\"text-xl font-bold text-text-primary\">{validatedCount}</span>\r\n                </div>\r\n                 <div className=\"flex flex-col items-end\">\r\n                    <span className=\"text-text-muted\">TARGET</span>\r\n                    <span className=\"text-xl font-bold text-text-primary\">50</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        {/* Main Interface */}\r\n        <div className=\"flex-1 flex gap-6 min-h-0\">\r\n            {/* Image Area */}\r\n            <div className={`relative flex-1 bg-black rounded-lg border-2 overflow-hidden transition-all duration-200 ${getBorderColor()}`}>\r\n                <Image \r\n                    src={task.imageUrl}\r\n                    alt=\"Triage Task\" \r\n                    fill\r\n                    className=\"object-contain\"\r\n                    sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 70vw, 50vw\"\r\n                    priority\r\n                />\r\n                \r\n                {/* Bounding Box Overlay */}\r\n                <div \r\n                    className=\"absolute border-2 border-yellow-400 bg-yellow-400/10 pointer-events-none transition-all duration-300\"\r\n                    style={overlayStyle}\r\n                >\r\n                    <div className=\"absolute -top-7 left-0 bg-yellow-400 text-black text-xs font-bold px-1.5 py-0.5 shadow-sm\">\r\n                        {task.currentLabel.toUpperCase()} {(task.confidence * 100).toFixed(0)}%\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Feedback Overlay */}\r\n                {feedback && (\r\n                     <div className={`absolute inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm animate-in fade-in duration-200`}>\r\n                        {feedback === \"correct\" ? (\r\n                            <div className=\"text-6xl font-black text-green-500 tracking-widest uppercase drop-shadow-[0_0_20px_rgba(34,197,94,0.8)]\">Verified</div>\r\n                        ) : (\r\n                             <div className=\"text-6xl font-black text-red-500 tracking-widest uppercase drop-shadow-[0_0_20px_rgba(239,68,68,0.8)]\">Rejected</div>\r\n                        )}\r\n                     </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Controls / Info */}\r\n            <div className=\"w-80 flex flex-col gap-4\">\r\n                <div className=\"bg-background-paper p-6 rounded-lg border border-primary/20 flex-1 flex flex-col justify-center items-center text-center gap-4\">\r\n                    <div className=\"text-text-muted uppercase text-xs tracking-wider\">Current Detection</div>\r\n                    <div className=\"text-4xl font-bold text-primary font-orbitron\">{task.currentLabel}</div>\r\n                    <div className=\"text-2xl text-text-secondary font-mono\">{(task.confidence * 100).toFixed(1)}%</div>\r\n                </div>\r\n\r\n                {/* Keyboard Guide */}\r\n                 <div className=\"bg-background-paper p-4 rounded-lg border border-primary/20\">\r\n                    <div className=\"space-y-3\">\r\n                        <div className=\"flex items-center justify-between group\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <kbd className=\"px-2 py-1 bg-background border border-text-muted/30 rounded text-xs font-mono text-text-primary\">Right / Y</kbd>\r\n                                <span className=\"text-sm text-text-secondary\">Validate</span>\r\n                            </div>\r\n                            <div className=\"w-3 h-3 rounded-full bg-green-500/20 border border-green-500/50 group-hover:bg-green-500 transition-colors\"></div>\r\n                        </div>\r\n                         <div className=\"flex items-center justify-between group\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <kbd className=\"px-2 py-1 bg-background border border-text-muted/30 rounded text-xs font-mono text-text-primary\">Left / N</kbd>\r\n                                <span className=\"text-sm text-text-secondary\">Reject</span>\r\n                            </div>\r\n                            <div className=\"w-3 h-3 rounded-full bg-red-500/20 border border-red-500/50 group-hover:bg-red-500 transition-colors\"></div>\r\n                        </div>\r\n                         <div className=\"flex items-center justify-between group\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <kbd className=\"px-2 py-1 bg-background border border-text-muted/30 rounded text-xs font-mono text-text-primary\">Space</kbd>\r\n                                <span className=\"text-sm text-text-secondary\">Skip</span>\r\n                            </div>\r\n                            <div className=\"w-3 h-3 rounded-full bg-yellow-500/20 border border-yellow-500/50 group-hover:bg-yellow-500 transition-colors\"></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\components\\triage\\__tests__\\TriageInterface.test.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":40,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":40,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1013,1016],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1013,1016],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":41,"column":30,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":41,"endColumn":33,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1077,1080],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1077,1080],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":52,"column":28,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":31,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1363,1366],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1363,1366],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { render, screen, fireEvent, waitFor } from \"@testing-library/react\";\r\nimport { vi, describe, it, expect, beforeEach } from \"vitest\";\r\nimport TriageInterface from \"../TriageInterface\";\r\nimport { QueryClient, QueryClientProvider } from \"@tanstack/react-query\";\r\n\r\n// Mock api\r\nvi.mock(\"@/lib/api\", () => ({\r\n  api: {\r\n    fetchNextImage: vi.fn(),\r\n    submitValidation: vi.fn(),\r\n  },\r\n}));\r\n\r\nimport { api } from \"@/lib/api\";\r\n\r\nconst createTestQueryClient = () =>\r\n  new QueryClient({\r\n    defaultOptions: {\r\n      queries: {\r\n        retry: false,\r\n      },\r\n    },\r\n  });\r\n\r\ndescribe(\"TriageInterface\", () => {\r\n  let queryClient: QueryClient;\r\n\r\n  // Mock task data\r\n  const mockTask = {\r\n    id: \"task_123\",\r\n    imageUrl: \"https://example.com/image.jpg\",\r\n    currentLabel: \"car\",\r\n    confidence: 0.95,\r\n    bbox: [0.1, 0.1, 0.2, 0.2] as [number, number, number, number],\r\n  };\r\n\r\n  beforeEach(() => {\r\n    queryClient = createTestQueryClient();\r\n    vi.clearAllMocks();\r\n    (api.fetchNextImage as any).mockResolvedValue(mockTask);\r\n    (api.submitValidation as any).mockResolvedValue(undefined);\r\n  });\r\n\r\n  const renderComponent = () =>\r\n    render(\r\n      <QueryClientProvider client={queryClient}>\r\n        <TriageInterface />\r\n      </QueryClientProvider>\r\n    );\r\n\r\n  it(\"renders loading state initially\", () => {\r\n    (api.fetchNextImage as any).mockImplementation(() => new Promise(() => {})); // Never resolves\r\n    renderComponent();\r\n    expect(screen.getByText(\"Fetching task...\")).toBeInTheDocument();\r\n  });\r\n\r\n  it(\"renders task data when loaded\", async () => {\r\n    renderComponent();\r\n    \r\n    await waitFor(() => {\r\n        expect(screen.getByText(\"TRIAGE STATION\")).toBeInTheDocument();\r\n    });\r\n\r\n    expect(screen.getByText(\"car\")).toBeInTheDocument();\r\n    expect(screen.getByText(\"95.0%\")).toBeInTheDocument();\r\n    // Image alt text\r\n    expect(screen.getByAltText(\"Triage Task\")).toBeInTheDocument();\r\n  });\r\n\r\n  it(\"validates on Y key press\", async () => {\r\n    renderComponent();\r\n    await waitFor(() => screen.getByText(\"car\"));\r\n\r\n    fireEvent.keyDown(window, { key: \"y\" });\r\n\r\n    // Expect Verified feedback overlay (async)\r\n    await waitFor(() => {\r\n        expect(screen.getByText(\"Verified\")).toBeInTheDocument();\r\n    });\r\n\r\n    // Expect API call after delay\r\n    await waitFor(() => {\r\n        expect(api.submitValidation).toHaveBeenCalledWith(\"task_123\", true, \"car\");\r\n    }, { timeout: 1000 });\r\n  });\r\n\r\n  it(\"rejects on N key press\", async () => {\r\n    renderComponent();\r\n    await waitFor(() => screen.getByText(\"car\"));\r\n\r\n    fireEvent.keyDown(window, { key: \"n\" });\r\n\r\n    // Expect Rejected feedback overlay\r\n    await waitFor(() => {\r\n        expect(screen.getByText(\"Rejected\")).toBeInTheDocument();\r\n    });\r\n\r\n    // Expect API call\r\n    await waitFor(() => {\r\n        expect(api.submitValidation).toHaveBeenCalledWith(\"task_123\", false, \"car\");\r\n    }, { timeout: 1000 });\r\n  });\r\n\r\n   it(\"skips on Space key press\", async () => {\r\n    renderComponent();\r\n    await waitFor(() => screen.getByText(\"car\"));\r\n\r\n    fireEvent.keyDown(window, { key: \" \" });\r\n\r\n    // Should invalidate queries (fetch next) usage check is hard on queryClient directly here without spying prototype, \r\n    // but we can check if fetchNextImage called again? \r\n    // Actually React Query refetch might not happen instantly if stale time 0 but we mocked it.\r\n    // Let's just check submitValidation is NOT called.\r\n    \r\n    await new Promise(r => setTimeout(r, 300));\r\n    expect(api.submitValidation).not.toHaveBeenCalled();\r\n  });\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\components\\ui\\CityMap.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'iconRetinaUrl' is assigned a value but never used.","line":37,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":37,"endColumn":24},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'iconUrl' is assigned a value but never used.","line":38,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":38,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'shadowUrl' is assigned a value but never used.","line":39,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":39,"endColumn":20},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1576,1579],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1576,1579],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\components\\ui\\CityMap.tsx:59:9\n  57 |       const targetCamera = cameras.find(c => c.id === cameraIdParam);\n  58 |       if (targetCamera) {\n> 59 |         setSelectedCamera(targetCamera);\n     |         ^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  60 |       }\n  61 |     }\n  62 |   }, [cameraIdParam, cameras]);","line":59,"column":9,"nodeType":null,"endLine":59,"endColumn":26}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useSearchParams } from 'next/navigation';\r\nimport { Camera } from '@/types/camera';\r\nimport { MapContainer, TileLayer, Marker, Popup, useMap } from 'react-leaflet';\r\nimport L from 'leaflet';\r\n\r\n// Custom hook to handle map recentering when selectedCamera changes\r\nfunction MapController({ selectedCamera }: { selectedCamera: Camera | null }) {\r\n  const map = useMap();\r\n  \r\n  useEffect(() => {\r\n    if (selectedCamera) {\r\n      map.flyTo([selectedCamera.location.lat, selectedCamera.location.lng], 15, {\r\n        animate: true,\r\n        duration: 1.5\r\n      });\r\n    }\r\n  }, [selectedCamera, map]);\r\n  \r\n  return null;\r\n}\r\n\r\ninterface CityMapProps {\r\n  cameras: Camera[];\r\n}\r\n\r\nconst CityMap: React.FC<CityMapProps> = ({ cameras }) => {\r\n  const [selectedCamera, setSelectedCamera] = useState<Camera | null>(null);\r\n  const searchParams = useSearchParams();\r\n  const cameraIdParam = searchParams.get('camera_id');\r\n\r\n  // Load Leaflet assets fix (client-side only)\r\n  useEffect(() => {\r\n    // Fix leafleft default icon issues in Next.js\r\n    const iconRetinaUrl = '/images/marker-icon-2x.png';\r\n    const iconUrl = '/images/marker-icon.png';\r\n    const shadowUrl = '/images/marker-shadow.png';\r\n\r\n    // We can just rely on setting the default locally or overriding specific markers\r\n    // But overriding the global prototype is effective for all markers\r\n    \r\n    // Check if window is defined just in case\r\n    if (typeof window !== 'undefined') {\r\n       delete (L.Icon.Default.prototype as any)._getIconUrl;\r\n       L.Icon.Default.mergeOptions({\r\n         iconRetinaUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png',\r\n         iconUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png',\r\n         shadowUrl: 'https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png',\r\n       });\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (cameraIdParam) {\r\n      const targetCamera = cameras.find(c => c.id === cameraIdParam);\r\n      if (targetCamera) {\r\n        setSelectedCamera(targetCamera);\r\n      }\r\n    }\r\n  }, [cameraIdParam, cameras]);\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case 'online': return 'text-success bg-success/20 border-success';\r\n      case 'alert': return 'text-alert bg-alert/20 border-alert animate-pulse';\r\n      case 'offline': return 'text-text-muted bg-text-muted/20 border-text-muted';\r\n      default: return 'text-primary bg-primary/20 border-primary';\r\n    }\r\n  };\r\n\r\n  // Center on first camera or a default location (e.g., Iowa / Des Moines) if list empty\r\n  const initialCenter: [number, number] = cameras.length > 0 \r\n    ? [cameras[0].location.lat, cameras[0].location.lng] \r\n    : [41.5868, -93.6250]; // Des Moines approx\r\n\r\n  return (\r\n    <div className=\"w-full h-[600px] rounded-lg overflow-hidden border border-text-muted/20 relative\">\r\n       {/* List Side Panel (Desktop only or floating?) -> Let's keep it overlay or separate? \r\n           The previous design had a list. Let's make it a side panel or overlay.\r\n           For \"Polished\", let's use a split view or just the map with a floating list.\r\n           Given constraints, let's make the map dominant and put a floating list on the left.\r\n       */}\r\n       \r\n       <MapContainer \r\n          center={initialCenter} \r\n          zoom={10} \r\n          scrollWheelZoom={true} \r\n          className=\"w-full h-full z-0\"\r\n          style={{ background: '#0f172a' }} // Dark background matching theme\r\n       >\r\n         <TileLayer\r\n           attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n           url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n           // Dark mode filter for tiles to match Cyberpunk theme\r\n           className=\"map-tiles-dark\" \r\n         />\r\n         \r\n         <MapController selectedCamera={selectedCamera} />\r\n\r\n         {cameras.map((camera) => (\r\n           <Marker \r\n             key={camera.id} \r\n             position={[camera.location.lat, camera.location.lng]}\r\n             eventHandlers={{\r\n                click: () => setSelectedCamera(camera),\r\n             }}\r\n           >\r\n             <Popup className=\"cyberpunk-popup\">\r\n               <div className=\"p-2 min-w-[200px]\">\r\n                 <h4 className=\"font-orbitron font-bold text-lg text-primary mb-1\">{camera.name}</h4>\r\n                 <div className=\"flex items-center gap-2 mb-2\">\r\n                    <span className={`px-2 py-0.5 rounded text-xs uppercase font-bold ${getStatusColor(camera.status)}`}>\r\n                        {camera.status}\r\n                    </span>\r\n                    <span className=\"text-xs text-text-muted\">ID: {camera.id}</span>\r\n                 </div>\r\n                 {camera.status === 'alert' && (\r\n                    <button className=\"w-full mt-2 bg-alert text-black font-bold py-1 px-3 rounded hover:bg-alert/80 text-xs\">\r\n                        View Feed\r\n                    </button>\r\n                 )}\r\n               </div>\r\n             </Popup>\r\n           </Marker>\r\n         ))}\r\n       </MapContainer>\r\n\r\n       {/* Floating Camera List Panel */}\r\n       <div className=\"absolute top-4 left-4 z-[400] w-72 bg-background/90 backdrop-blur-md rounded-lg border border-primary/30 max-h-[calc(100%-2rem)] flex flex-col shadow-2xl\">\r\n          <div className=\"p-4 border-b border-primary/20\">\r\n              <h3 className=\"font-orbitron text-primary text-xl font-bold flex items-center gap-2\">\r\n                 <span className=\"w-2 h-2 rounded-full bg-alert animate-pulse\"/>\r\n                 SYSTEM.MAP\r\n              </h3>\r\n              <p className=\"text-xs text-text-muted mt-1 font-mono\">\r\n                  ACTIVE NODES: {cameras.length}\r\n              </p>\r\n          </div>\r\n          <div className=\"overflow-y-auto flex-1 p-2 space-y-2 custom-scrollbar\">\r\n              {cameras.map(cam => (\r\n                  <div \r\n                    key={cam.id}\r\n                    onClick={() => setSelectedCamera(cam)}\r\n                    className={`\r\n                        p-3 rounded border cursor-pointer transition-all\r\n                        ${selectedCamera?.id === cam.id \r\n                            ? 'bg-primary/20 border-primary ml-2' \r\n                            : 'bg-surface/50 border-transparent hover:border-primary/50 hover:bg-surface/80'}\r\n                    `}\r\n                  >\r\n                      <div className=\"flex justify-between items-start\">\r\n                          <span className=\"text-sm font-medium truncate w-[130px]\">{cam.name}</span>\r\n                          <span className={`text-[10px] px-1.5 py-0.5 rounded uppercase ${getStatusColor(cam.status)}`}>\r\n                              {cam.status}\r\n                          </span>\r\n                      </div>\r\n                      <div className=\"text-[10px] text-text-muted mt-1 font-mono\">\r\n                          LAT: {cam.location.lat.toFixed(3)} | LNG: {cam.location.lng.toFixed(3)}\r\n                      </div>\r\n                  </div>\r\n              ))}\r\n          </div>\r\n       </div>\r\n\r\n       {/* Map Overlay CSS for Dark Mode Tiles */}\r\n       <style jsx global>{`\r\n         .map-tiles-dark {\r\n            filter: invert(100%) hue-rotate(180deg) brightness(95%) contrast(90%);\r\n         }\r\n         .leaflet-popup-content-wrapper {\r\n            background: rgba(15, 23, 42, 0.95);\r\n            color: #e2e8f0;\r\n            border: 1px solid #0ea5e9;\r\n            border-radius: 4px;\r\n         }\r\n         .leaflet-popup-tip {\r\n            background: rgba(15, 23, 42, 0.95);\r\n            border: 1px solid #0ea5e9;\r\n         }\r\n         .leaflet-container {\r\n             font-family: var(--font-inter), sans-serif;\r\n         }\r\n       `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CityMap;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\components\\ui\\EmptyState.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\components\\ui\\EventLog.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\components\\ui\\Gauge.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\components\\ui\\HealthDashboard.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\components\\ui\\HealthDashboard.tsx:29:5\n  27 |     const sysEvent = lastEvent as SystemMetricEvent;\n  28 |     \n> 29 |     setMetrics((prev) => {\n     |     ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  30 |       const newMetrics = { ...prev };\n  31 |       \n  32 |       if (sysEvent.metricType === \"cpu_usage\") {","line":29,"column":5,"nodeType":null,"endLine":29,"endColumn":15}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Gauge } from \"./Gauge\"; // Adjust path if needed\r\nimport { useWebSocket } from \"@/contexts/WebSocketContext\"; // Adjust path if needed (src/contexts or src/context)\r\nimport { SystemMetricEvent } from \"@/types/events\";\r\n\r\ninterface SystemMetrics {\r\n  cpu: { value: number; status: \"healthy\" | \"warning\" | \"critical\" };\r\n  memory: { value: number; status: \"healthy\" | \"warning\" | \"critical\" };\r\n  kafkaLag: { value: number; status: \"healthy\" | \"warning\" | \"critical\" };\r\n}\r\n\r\nexport function HealthDashboard() {\r\n  // Use global subscription (no cameraId)\r\n  const { lastEvent } = useWebSocket();\r\n  \r\n  const [metrics, setMetrics] = useState<SystemMetrics>({\r\n    cpu: { value: 0, status: \"healthy\" },\r\n    memory: { value: 0, status: \"healthy\" },\r\n    kafkaLag: { value: 0, status: \"healthy\" },\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (!lastEvent || lastEvent.eventType !== \"system\") return;\r\n\r\n    const sysEvent = lastEvent as SystemMetricEvent;\r\n    \r\n    setMetrics((prev) => {\r\n      const newMetrics = { ...prev };\r\n      \r\n      if (sysEvent.metricType === \"cpu_usage\") {\r\n        newMetrics.cpu = { value: sysEvent.value, status: sysEvent.status };\r\n      } else if (sysEvent.metricType === \"memory_usage\") {\r\n        newMetrics.memory = { value: sysEvent.value, status: sysEvent.status };\r\n      } else if (sysEvent.metricType === \"kafka_lag\") {\r\n        newMetrics.kafkaLag = { value: sysEvent.value, status: sysEvent.status };\r\n      }\r\n      \r\n      return newMetrics;\r\n    });\r\n  }, [lastEvent]);\r\n\r\n  return (\r\n    <div className=\"bg-gray-900/80 backdrop-blur-md border border-gray-800 rounded-xl p-4 shadow-2xl\">\r\n      <h3 className=\"text-lg font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-blue-500 mb-4 tracking-wider uppercase\">\r\n        System Health\r\n      </h3>\r\n      \r\n      <div className=\"flex flex-row items-center justify-around gap-4 flex-wrap\">\r\n        <Gauge \r\n          value={metrics.cpu.value} \r\n          status={metrics.cpu.status}\r\n          label=\"CPU Load\" \r\n          unit=\"%\" \r\n        />\r\n        <Gauge \r\n          value={metrics.memory.value} \r\n          status={metrics.memory.status}\r\n          label=\"Memory\" \r\n          unit=\"%\" \r\n        />\r\n        <Gauge \r\n          value={metrics.kafkaLag.value} \r\n          status={metrics.kafkaLag.status}\r\n          label=\"Kafka Lag\" \r\n          unit=\"ms\"\r\n          max={1000} // Scale lag explicitly if needed, or let Gauge handle\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\components\\ui\\StreamCard.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":107,"column":9,"nodeType":"JSXOpeningElement","endLine":111,"endColumn":11}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport VideoPlayer from \"./VideoPlayer\";\r\nimport VideoOverlay from \"./VideoOverlay\";\r\nimport { useWebSocket } from \"@/contexts/WebSocketContext\";\r\nimport { useRef, useEffect, useState } from \"react\";\r\n\r\nimport { CameraStatus } from \"@/types/camera\";\r\n\r\n// Helper component to connect overlay to WS to avoid bloating StreamCard\r\nfunction ConnectedOverlay({ cameraId, isAnomaly }: { cameraId: string, isAnomaly: boolean }) {\r\n    const { lastEvent } = useWebSocket(cameraId);\r\n    const containerRef = useRef<HTMLDivElement>(null);\r\n    const [dims, setDims] = useState({ w: 0, h: 0 });\r\n\r\n    useEffect(() => {\r\n        if (!containerRef.current) return;\r\n        const resizeObserver = new ResizeObserver((entries) => {\r\n            for (const entry of entries) {\r\n                setDims({ w: entry.contentRect.width, h: entry.contentRect.height });\r\n            }\r\n        });\r\n        resizeObserver.observe(containerRef.current);\r\n        return () => resizeObserver.disconnect();\r\n    }, []);\r\n\r\n    const detections = (lastEvent && \"detections\" in lastEvent) ? lastEvent.detections || [] : [];\r\n\r\n\r\n    return (\r\n        <div ref={containerRef} className=\"w-full h-full\">\r\n            <VideoOverlay \r\n                detections={detections} \r\n                width={dims.w} \r\n                height={dims.h} \r\n                isAnomaly={isAnomaly || (lastEvent?.eventType === \"anomaly\")} \r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport interface StreamCardProps {\r\n  cameraId: string;\r\n  name: string;\r\n  status: CameraStatus;\r\n  thumbnailUrl?: string;\r\n  streamUrl?: string;\r\n}\r\n\r\nexport default function StreamCard({\r\n  cameraId,\r\n  name,\r\n  status,\r\n  thumbnailUrl,\r\n  streamUrl,\r\n}: StreamCardProps) {\r\n  const [isHovered, setIsHovered] = useState(false);\r\n\r\n  const statusConfig = {\r\n    online: {\r\n      border: \"border-success\",\r\n      glow: \"glow-success\",\r\n      dot: \"bg-success\",\r\n      text: \"text-success\",\r\n    },\r\n    offline: {\r\n      border: \"border-text-muted\",\r\n      glow: \"\",\r\n      dot: \"bg-text-muted\",\r\n      text: \"text-text-muted\",\r\n    },\r\n    alert: {\r\n      border: \"border-alert\",\r\n      glow: \"glow-alert animate-pulse\",\r\n      dot: \"bg-alert\",\r\n      text: \"text-alert\",\r\n    },\r\n  };\r\n\r\n  const config = statusConfig[status];\r\n\r\n  return (\r\n    <div\r\n      className={`relative aspect-video bg-background rounded-lg border-2 ${config.border} ${\r\n        status === \"alert\" ? config.glow : \"\"\r\n      } overflow-hidden transition-all duration-200 group cursor-pointer`}\r\n      onMouseEnter={() => setIsHovered(true)}\r\n      onMouseLeave={() => setIsHovered(false)}\r\n      data-camera-id={cameraId}\r\n    >\r\n      {/* Thumbnail/Video Placeholder */}\r\n      {/* Video Player or Thumbnail */}\r\n      {/* Video Player or Thumbnail */}\r\n        {status === \"online\" || status === \"alert\" ? (\r\n        <>\r\n            <VideoPlayer \r\n                streamUrl={streamUrl || `http://localhost:8888/cam/${cameraId}/index.m3u8`}\r\n                className=\"absolute inset-0 w-full h-full object-cover\"\r\n                // object-cover might conflict with player's internal sizing, but generic VideoPlayer has w/h 100%\r\n            />\r\n            {/* Overlay */}\r\n            <div className=\"absolute inset-0 pointer-events-none z-10\">\r\n                 <ConnectedOverlay cameraId={cameraId} isAnomaly={status === \"alert\"} />\r\n            </div>\r\n        </>\r\n      ) : thumbnailUrl ? (\r\n        <img\r\n          src={thumbnailUrl}\r\n          alt={name}\r\n          className=\"absolute inset-0 w-full h-full object-cover\"\r\n        />\r\n      ) : (\r\n        <div className=\"absolute inset-0 flex items-center justify-center bg-zinc-900\">\r\n          <svg\r\n            xmlns=\"http://www.w3.org/2000/svg\"\r\n            fill=\"none\"\r\n            viewBox=\"0 0 24 24\"\r\n            strokeWidth={1}\r\n            stroke=\"currentColor\"\r\n            className=\"w-12 h-12 text-text-muted/30\"\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              d=\"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z\"\r\n            />\r\n          </svg>\r\n        </div>\r\n      )}\r\n\r\n      {/* Status Indicator */}\r\n      <div className=\"absolute top-2 right-2 flex items-center gap-1.5 px-2 py-1 bg-background/80 rounded-full backdrop-blur-sm\">\r\n        <span className={`w-2 h-2 rounded-full ${config.dot} ${status === \"alert\" ? \"animate-pulse\" : \"\"}`} />\r\n        <span className={`text-xs font-medium ${config.text}`}>{status.toUpperCase()}</span>\r\n      </div>\r\n\r\n      {/* Camera Name Overlay */}\r\n      <div className=\"absolute bottom-0 left-0 right-0 p-3 bg-gradient-to-t from-background/90 to-transparent\">\r\n        <p className=\"text-text-primary text-sm font-medium truncate\">{name}</p>\r\n        <p className=\"text-text-muted text-xs\">{cameraId}</p>\r\n      </div>\r\n\r\n      {/* Hover Overlay */}\r\n      <div\r\n        className={`absolute inset-0 bg-primary/10 flex items-center justify-center transition-opacity duration-200 ${\r\n          isHovered ? \"opacity-100\" : \"opacity-0\"\r\n        }`}\r\n      >\r\n        <button\r\n          className=\"px-4 py-2 bg-primary text-background font-medium rounded-lg hover:bg-primary/90 transition-colors transform hover:scale-105\"\r\n          onClick={(e) => {\r\n            e.stopPropagation();\r\n            // Expand functionality deferred to future story\r\n            console.log(`Expand camera: ${cameraId}`);\r\n          }}\r\n        >\r\n          <span className=\"flex items-center gap-2\">\r\n            <svg\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              fill=\"none\"\r\n              viewBox=\"0 0 24 24\"\r\n              strokeWidth={2}\r\n              stroke=\"currentColor\"\r\n              className=\"w-4 h-4\"\r\n            >\r\n              <path\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                d=\"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15\"\r\n              />\r\n            </svg>\r\n            Expand\r\n          </span>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\components\\ui\\VideoGrid.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\components\\ui\\VideoGrid.tsx:33:5\n  31 |\n  32 |   useEffect(() => {\n> 33 |     setMounted(true);\n     |     ^^^^^^^^^^ Avoid calling setState() directly within an effect\n  34 |   }, []);\n  35 |\n  36 |   // Calculate generic columns","line":33,"column":5,"nodeType":null,"endLine":33,"endColumn":15}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport StreamCard from \"./StreamCard\";\r\nimport { NoCamerasEmptyState } from \"./EmptyState\";\r\nimport { useWindowSize } from \"@/hooks/useWindowSize\";\r\n\r\nimport { Camera } from \"@/types/camera\";\r\n\r\nexport interface VideoGridProps {\r\n  cameras: Camera[];\r\n}\r\n\r\n/**\r\n * Calculates grid columns based on camera count\r\n * - 1 camera: 1x1\r\n * - 2-4 cameras: 2x2\r\n * - 5-9 cameras: 3x3\r\n * - 10-16 cameras: 4x4\r\n */\r\nfunction getGridColumns(count: number): number {\r\n  if (count <= 1) return 1;\r\n  if (count <= 4) return 2;\r\n  if (count <= 9) return 3;\r\n  return 4;\r\n}\r\n\r\nexport default function VideoGrid({ cameras }: VideoGridProps) {\r\n  const { width } = useWindowSize();\r\n  const [mounted, setMounted] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setMounted(true);\r\n  }, []);\r\n\r\n  // Calculate generic columns\r\n  const baseCols = getGridColumns(cameras.length);\r\n  \r\n  // Apply responsive constraints\r\n  let gridCols = baseCols;\r\n  if (mounted) {\r\n      if (width < 768) {\r\n        gridCols = Math.min(baseCols, 1);\r\n      } else if (width < 1024) {\r\n        gridCols = Math.min(baseCols, 2);\r\n      }\r\n  } else {\r\n      // Default for SSR/initial render\r\n      gridCols = 1;\r\n  }\r\n\r\n  if (cameras.length === 0) {\r\n    return (\r\n      <div className=\"bg-surface rounded-lg border border-text-muted/20 min-h-[400px] flex items-center justify-center\">\r\n        <NoCamerasEmptyState />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className=\"grid gap-4 p-4\"\r\n      style={{\r\n        gridTemplateColumns: `repeat(${gridCols}, minmax(0, 1fr))`,\r\n      }}\r\n    >\r\n      {cameras.map((camera) => (\r\n        <StreamCard\r\n          key={camera.id}\r\n          cameraId={camera.id}\r\n          name={camera.name}\r\n          status={camera.status}\r\n          thumbnailUrl={camera.thumbnailUrl}\r\n          streamUrl={camera.streamUrl}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\components\\ui\\VideoOverlay.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\components\\ui\\VideoPlayer.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":134,"column":39,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":134,"endColumn":42,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3922,3925],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3922,3925],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport { useState, useEffect, useCallback, useRef } from \"react\";\r\nimport ReactPlayer from \"react-player\";\r\nimport Hls from \"hls.js\";\r\n\r\nexport interface VideoPlayerProps {\r\n  streamUrl: string;\r\n  className?: string; // Additional classes for the container\r\n  aspectRatio?: string; // e.g., \"16/9\"\r\n  onStatusChange?: (status: \"loading\" | \"playing\" | \"error\" | \"offline\") => void;\r\n}\r\n\r\n\r\n\r\nexport default function VideoPlayer({\r\n  streamUrl,\r\n  className = \"\",\r\n  aspectRatio = \"16/9\",\r\n  onStatusChange,\r\n}: VideoPlayerProps) {\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [error, setError] = useState(false);\r\n  const [retryCount, setRetryCount] = useState(0);\r\n\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n  const hlsRef = useRef<Hls | null>(null);\r\n  const reconnectTimeoutRef = useRef<NodeJS.Timeout | null>(null);\r\n\r\n  const isHls = streamUrl && (streamUrl.includes(\".m3u8\") || streamUrl.includes(\"blob:\"));\r\n\r\n  // Check support once\r\n  const isHlsSupported = typeof window !== \"undefined\" && Hls.isSupported();\r\n\r\n  const handleManualRetry = useCallback(() => {\r\n    if (reconnectTimeoutRef.current) clearTimeout(reconnectTimeoutRef.current);\r\n    setRetryCount(0);\r\n    setError(false);\r\n    setIsLoading(true);\r\n  }, []);\r\n\r\n  // HLS Direct Implementation\r\n  useEffect(() => {\r\n    if (!isHls || !isHlsSupported) return;\r\n\r\n    let hls = hlsRef.current; \r\n\r\n    const initPlayer = () => {\r\n      if (hls) {\r\n        hls.destroy();\r\n      }\r\n\r\n      hls = new Hls({\r\n        enableWorker: true,\r\n        lowLatencyMode: true,\r\n        backBufferLength: 90\r\n      });\r\n      hlsRef.current = hls;\r\n\r\n      if (videoRef.current) {\r\n        hls.attachMedia(videoRef.current);\r\n      }\r\n\r\n      hls.on(Hls.Events.MEDIA_ATTACHED, () => {\r\n        hls?.loadSource(streamUrl);\r\n      });\r\n\r\n      hls.on(Hls.Events.MANIFEST_PARSED, () => {\r\n        setIsLoading(false);\r\n        setIsPlaying(true);\r\n        setError(false);\r\n        setRetryCount(0);\r\n        onStatusChange?.(\"playing\");\r\n        videoRef.current?.play().catch(() => {\r\n          // Mute usually handles this, so ensuring muted prop is on video tag\r\n        });\r\n      });\r\n\r\n      hls.on(Hls.Events.ERROR, (event, data) => {\r\n        if (data.fatal) {\r\n          console.error(\"[VideoPlayer] HLS Fatal Error:\", data);\r\n          switch (data.type) {\r\n            case Hls.ErrorTypes.NETWORK_ERROR:\r\n              hls?.startLoad();\r\n              break;\r\n            case Hls.ErrorTypes.MEDIA_ERROR:\r\n              hls?.recoverMediaError();\r\n              break;\r\n            default:\r\n              setIsLoading(false);\r\n              setError(true);\r\n              onStatusChange?.(\"error\");\r\n              hls?.destroy();\r\n              break;\r\n          }\r\n        }\r\n      });\r\n    };\r\n\r\n    initPlayer();\r\n\r\n    return () => {\r\n      if (hls) {\r\n        hls.destroy();\r\n      }\r\n    };\r\n  }, [streamUrl, isHls, isHlsSupported, retryCount, onStatusChange]);\r\n\r\n  // Retry logic for manual HLS\r\n  useEffect(() => {\r\n    if (error && isHls) {\r\n       const delay = Math.min(Math.pow(2, retryCount) * 1000, 30000);\r\n       reconnectTimeoutRef.current = setTimeout(() => {\r\n          // Trigger re-init by bumping retryCount (used in dep array)\r\n          // or we can just call internal logic but dep array is cleaner\r\n          // Actually, retryCount is in dep array, so changing it re-runs effect\r\n       }, delay);\r\n       return () => {\r\n         if (reconnectTimeoutRef.current) clearTimeout(reconnectTimeoutRef.current);\r\n       };\r\n    }\r\n  }, [error, retryCount, isHls]);\r\n\r\n\r\n  // Logic for ReactPlayer (fallback) callbacks\r\n  const handleReady = useCallback(() => {\r\n    setIsLoading(false);\r\n    setError(false);\r\n    setIsPlaying(true);\r\n    onStatusChange?.(\"playing\");\r\n  }, [onStatusChange]);\r\n\r\n  const handleError = useCallback((e: any) => {\r\n    console.error(\"[VideoPlayer] Error (Fallback):\", e);\r\n    setError(true);\r\n    setIsLoading(false);\r\n    onStatusChange?.(\"error\");\r\n  }, [onStatusChange]);\r\n\r\n  return (\r\n    <div\r\n      className={`relative w-full overflow-hidden bg-black rounded-lg ${className}`}\r\n      style={{ aspectRatio: aspectRatio.replace(\":\", \"/\") }}\r\n    >\r\n      {/* Loading & Error Overlays */}\r\n      {(isLoading || error) && (\r\n        <div className=\"absolute inset-0 z-10 flex items-center justify-center bg-zinc-900/80 text-white backdrop-blur-sm\">\r\n          {error ? (\r\n            <div className=\"flex flex-col items-center gap-4 text-red-500 animate-in fade-in zoom-in duration-300\">\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-10 h-10\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z\" />\r\n              </svg>\r\n              <div className=\"text-center\">\r\n                <span className=\"block text-sm font-semibold\">Signal Lost</span>\r\n                <span className=\"text-xs text-zinc-400\">Retrying...</span>\r\n              </div>\r\n              <button \r\n                onClick={handleManualRetry}\r\n                className=\"px-4 py-2 text-xs font-medium text-white bg-red-600 rounded hover:bg-red-700 transition-colors\"\r\n              >\r\n                Retry\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex flex-col items-center gap-3 text-zinc-400\">\r\n              <div className=\"h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent\" />\r\n              <span className=\"text-sm font-medium\">Connecting...</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Player Implementation */}\r\n      {isHls && isHlsSupported ? (\r\n        <video\r\n          ref={videoRef}\r\n          className=\"w-full h-full object-cover\"\r\n          muted={true}\r\n          autoPlay={true}\r\n          controls={true}\r\n          playsInline={true}\r\n        />\r\n      ) : (\r\n        <ReactPlayer\r\n          url={streamUrl}\r\n          width=\"100%\"\r\n          height=\"100%\"\r\n          playing={isPlaying}\r\n          muted={true}\r\n          controls={true}\r\n          onReady={handleReady}\r\n          onError={handleError}\r\n          onBuffer={() => setIsLoading(true)}\r\n          onBufferEnd={() => setIsLoading(false)}\r\n          style={{ position: \"absolute\", top: 0, left: 0 }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\contexts\\WebSocketContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\hooks\\useWindowSize.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\lib\\api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\types\\camera.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\types\\events.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\basti\\OneDrive\\Bureau\\code\\antigravity\\smart_city_overwiew\\smart_city_traffic_overview\\services\\web-dashboard\\src\\types\\react-player.d.ts","messages":[],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[880,883],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[880,883],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[892,895],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[892,895],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[911,914],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[911,914],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":29,"column":71,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":29,"endColumn":74,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[928,931],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[928,931],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":33,"column":20,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":33,"endColumn":23,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1166,1169],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1166,1169],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":35,"column":72,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":35,"endColumn":75,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1248,1251],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1248,1251],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":39,"column":38,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":39,"endColumn":41,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1418,1421],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1418,1421],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]